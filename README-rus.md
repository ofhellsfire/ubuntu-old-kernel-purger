# old-kernel-purger

__old-kernel-purger__ - это простенький bash скрипт, позволяющий отображать и удалять старые версии ядер, которые идут в виде пакетов для Ubuntu 14.

## Описание

Для удаления старых пакетов скрипт, главным образом, использует пакетный менеджер __apt__.
Для запуска __old-kernel-purger__ требует прав администратора и версию Bash >= 4.

Скрипт имеет простой механизм исключений для тех пакетов, которые необходимо не удалять, за счёт чтения файла __.kernelkeep__, который содержит версии ядер, которые следует сохранить.
Чтобы добавить исключение: создайте __.kernelkeep__ (если он отсутствует) файл в той же директории, где расположен скрипт и добавьте версии для исключения: каждая версия на отдельной строчке.

__old-kernel-purger__ позволяет производить запуск без выполнения действий по удалению (так называемый _dry-run_). Это может быть полезно для понимания: какие версии будут нетронуты, а какие удалены.

Скрипт исключает текущую загруженную версию ядра автоматически.
По умолчанию, в дополнение к текущей загруженной версии, скрипт также исключает 2 последние версии. Данное поведение возможно контроллировать через аргументы командной строки.

## Пример

__Отобразить, что будет нетронуто и что будет удалено__

```sudo ./old-kernel-purger.sh --dry-run```

__Удалить старые версии ядра без подтверждения, сохранив 3 последние версии__

_По умолчанию, во время удаления пакетов, будет каждый раз запрашиваться подтверждение на удаление. Отключить подтверждение можно используя аргумент __--yes___

```sudo ./old-kernel-purger.sh --yes --keep 3```

## Аргументы командной строки

```
Удаляет старые пакеты с ядрами для Ubuntu 14.04 (требуются права администратора)

Аргументы:
-h, --help              Отобразить это сообщение.
-d, --dry-run           Запуск без выполнения удаления.
                        Полезен для понимания того, какие
                        пакеты будут удалены. По умолчанию: false
-y, --yes               Запуск в режиме 'без подтверждения'.
                        По умолчанию: false
-k <num>, --keep <num>  Указать, сколько последних версий оставить.
                        По умолчанию: 2
```

